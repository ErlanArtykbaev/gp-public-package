# Работа с ядром

[Репозиторий ядра](https://bitbucket.org/gostgroup/core) платформы является основой
для других проектов.

При создании проекта на основе ядра платформы от репозитория делается форк и
создается репозиторий нового проекта.

Пример инициализации приложения на основе ядра находится в папке `src/core/app`

## Создание проекта на основе ядра

1. Создаем форк репозитория ядра в новый репозиторий

2. Создаем в папке `src` папку с названием проекта

3. Копируем содержимое папки `src/core/app` в папку, созданную в пункте 2.

4. Меняем файл `src/index.js` следующим образом

      + До

              // src/index.js
              ...
              ...
              import 'core/app/app'; // эту строку удаляем

      + После

              // src.index.js
              ...
              ...
              import 'project/app'; // project - имя папки с проектом

## Изменения файлов ядра

В связи с тем что проекты, созданные на основе ядра платформы являются форками
репозитория ядра, все они имеют папку `src/core` содержащую непосредственно ядро
платформы.

Крайне не рекомендуется изменять внутри создаваемых проектов содержимое следующих папок:

+  `src/core`

+  `webpack`

+  `test/core`

+  `docs`

+  `bin`

Это связано с тем, что функционал ядра платформы развивается как модульный и
модифицируемый, а проекты основанные на ядре платформы имеют возможность изменения
функционала ядра путем изменения конфигурационных файлов.

Так же отсутствие изменений внутри этих папок гарантирует отсутствие конфликтов при обновлении
содержимого ядра внутри проекта.

### Изменение функционала

Необходимость изменения папок ядра обсусловлена следующими нуждами:

1. Добавление нового функционала в часть приложения, взятую из ядра

2. Изменение функционала части приложения, взятой из ядра

Возможны следующие варианты решения данных потребностей (соответственно):

1. Если функционал пригодится в ядре платформы, а так же будет реализован с возможностью конфигурации включения/отключения, то функционал добавляется в репозиторий ядра, далее содержимое ядра внутри проекта обновляется (в соответствии с пунктом `Обновление ядра внутри проекта`)

2. Если изменение функционала полезно для ядра платформы, то функционал изменяется в соответствии с задачей

В обоих случаях необходимо согласовать данные изменения с командой, занимающейся платформой, для принятия итогового решения о полезности добавляемого/изменяемого функционала.


### Невозможность изменения

В случае если требуется изменение функционала ядра платформы так, что эти изменения точно не пойдут на пользу ядру, то изменение выполняется внутри папок ядра внутри соответствующего проекта, однако так делать **крайне не рекомендуется**

### Баги

Все баги ядра платформы исправляются внутри репозитория ядра, затем выполняется `Обновление ядра внутри проекта`


## Обновление ядра внутри проекта

Следующая последовательность команд позволит обновить содержимое ядра платформы в проекте, основанном на репозитории ядра платформы.

1. Выполняем команду `git remote add core git@bitbucket.org:gostgroup/core.git` (добавляет
в список `remote`-репозиториев репозиторий ядра под именем `core`) (данную команду достаточно выполнить только в первый раз)

2. Выполняем команду `git fetch core master` (получает из удаленного репозитория ядра ветку `master` и сохраняет ее в локальной ветке `core/master`)

3. Выполняем команду `git merge core/master` (мерджит содержимое этой ветки с текущей веткой проекта, основанного на ядре и обновляет соответствующие ядру файлы)
